@page "/users/{userId:int}"
@using CleanUps.Shared.DTOs.Users
@inject NavigationManager _navigationManager
@inject UserApiService _userApiService

<h3>User Details</h3>

@if (user == null)
{
    <p>Loading...</p>
}
else if (user.IsSuccess)
{
    <div>
        <p><strong>ID:</strong> @user.Data.UserId</p>
        <p><strong>Name:</strong> @user.Data.Name</p>
        <p><strong>Email:</strong> @user.Data.Email</p>
        <p><strong>Email:</strong> @user.Data.Role.ToString()</p>
        <p><strong>Email:</strong> @user.Data.CreatedDate</p>
    </div>
    <button class="btn btn-secondary" @onclick="GoBack">Back</button>
}
else
{
    <p class="text-danger">Error: @user.ErrorMessage</p>
}

@code {
    [Parameter]
    public int userId { get; set; }

    private Result<UserResponse> user;

    protected override async Task OnInitializedAsync()
    {
        user = await _userApiService.GetUserByIdAsync(userId);
    }

    private void GoBack()
    {
        _navigationManager.NavigateTo("/users");
    }
}